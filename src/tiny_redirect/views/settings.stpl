<!DOCTYPE html>
<html lang="en">
% include("header")

<body>
        % include("navmenu")

        <div class="" style="margin:auto; width: 30%; min-width:800px; padding-bottom: 20%;">
        <div style="width:100%; margin:auto; display:flex; justify-content:left;">
                <h4 style="margin-top:1em";>Modify Server Settings</h4>
        </div>

                <form action="/update_settings" method="post">
                        <input type="hidden" name="csrf_token" value="{{csrf_token}}">

                        <label for="hostname">Server Listen Address:</label>
                        <input type="text" class="form-control" name="hostname" id="hostname"
                                value="{{current_host}}">

                        <label for="port">Server Listen Port:</label>
                        <input type="number" class="form-control" name="port" id="port"
                                value="{{current_port}}" min="1" max="65535">

                        <button style="width:100%; margin:auto; margin-top:1em;" type="submit" class="btn btn-warning"><strong>Apply Settings</strong></button>
                </form>

                <div class="d-flex mx-auto alert alert-warning" role="alert" style="margin-top:1em; width: 100%;">
                        <h5 class="text-center">
                                You will need to shutdown and restart the server / application for theses settings to take effect.
                        </h5>
                </div>

                <!-- Import/Export Section -->
                <div style="width:100%; margin:auto; display:flex; justify-content:left; margin-top:2em;">
                        <h4 style="margin-top:1em";>Import / Export Redirects</h4>
                </div>

                <!-- Export Button -->
                <div style="margin-top:1em;">
                        <a href="/export_redirects" class="btn btn-success" style="width:100%;">
                                <strong>Export Redirects to tredirects.json</strong>
                        </a>
                        <small class="form-text text-muted">
                                Download all current redirects as a tredirects.json file
                        </small>
                </div>

                <!-- Import Form -->
                <form action="/import_redirects" method="post" enctype="multipart/form-data" style="margin-top:1em;">
                        <input type="hidden" name="csrf_token" value="{{csrf_token}}">

                        <label for="import_file">Import Redirects from tredirects.json:</label>
                        <input type="file" class="form-control" name="import_file" id="import_file" accept=".json" required>

                        <div class="form-check" style="margin-top:0.5em;">
                                <input type="checkbox" class="form-check-input" name="replace_mode" id="replace_mode">
                                <label class="form-check-label" for="replace_mode">
                                        Replace all existing redirects (if unchecked, will merge and skip duplicates)
                                </label>
                        </div>

                        <button style="width:100%; margin:auto; margin-top:1em;" type="submit" class="btn btn-primary">
                                <strong>Import Redirects</strong>
                        </button>
                        <small class="form-text text-muted">
                                Only tredirects.json files with the correct identifier will be accepted
                        </small>
                </form>
        </div>




        % include("footer")
        % include("js")

</body>

</html>
